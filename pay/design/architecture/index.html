
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Distributed pay system.">
      
      
      
        <meta name="author" content="Blademainer">
      
      
        <link rel="canonical" href="https://pjoc.pub/pay/design/architecture/">
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.0">
    
    
      
        <title>1.3 架构 - PJOC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fe914879.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ba0d045b.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="white">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#-" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="PJOC" class="md-header__button md-logo" aria-label="PJOC" data-md-component="logo">
      
  <img src="../../../img/pjoc.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PJOC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.3 架构
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/pjoc-team/pjoc-team.github.io/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../specification/dev-specification/" class="md-tabs__link">
        规范
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../summary/pay-summary/" class="md-tabs__link md-tabs__link--active">
        支付
      </a>
    </li>
  

  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../about/" class="md-tabs__link">
      About
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="PJOC" class="md-nav__button md-logo" aria-label="PJOC" data-md-component="logo">
      
  <img src="../../../img/pjoc.png" alt="logo">

    </a>
    PJOC
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pjoc-team/pjoc-team.github.io/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        规范
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="规范" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          规范
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../specification/dev-specification/" class="md-nav__link">
        1 开发规范
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../specification/golang-standards-project-layout/" class="md-nav__link">
        2 项目规范
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        支付
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="支付" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          支付
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      <label class="md-nav__link" for="__nav_3_1">
        1 设计
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="1 设计" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          1 设计
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../summary/pay-summary/" class="md-nav__link">
        1.1 概述
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../biz/" class="md-nav__link">
        1.2 需求设计
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          1.3 架构
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        1.3 架构
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    设计
  </a>
  
    <nav class="md-nav" aria-label="设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    目标
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    拆分
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    实现
  </a>
  
    <nav class="md-nav" aria-label="实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    网关体系
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    渠道服务集合
  </a>
  
    <nav class="md-nav" aria-label="渠道服务集合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    原则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    微服务化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    面向协议编程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    扩展&amp;配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    支付网关系统
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    支付调用时序图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    签约
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    数据库高可用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    部署架构
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    交互
  </a>
  
    <nav class="md-nav" aria-label="交互">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    配置
  </a>
  
    <nav class="md-nav" aria-label="配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    渠道
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pay-admin/" class="md-nav__link">
        1.4 管理后台
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        2 接口
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="2 接口" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          2 接口
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/pay-gateway/" class="md-nav__link">
        2.1 支付网关
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/notify/" class="md-nav__link">
        2.2 通知服务
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    设计
  </a>
  
    <nav class="md-nav" aria-label="设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    目标
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    拆分
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    实现
  </a>
  
    <nav class="md-nav" aria-label="实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    网关体系
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    渠道服务集合
  </a>
  
    <nav class="md-nav" aria-label="渠道服务集合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    原则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    微服务化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    面向协议编程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    扩展&amp;配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    支付网关系统
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    支付调用时序图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    签约
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    数据库高可用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    部署架构
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    交互
  </a>
  
    <nav class="md-nav" aria-label="交互">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    配置
  </a>
  
    <nav class="md-nav" aria-label="配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    渠道
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/pjoc-team/pjoc-team.github.io/edit/master/docs/pay/design/architecture.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="-">支付系统-架构设计</h1>
<style>

span.green {
    color: #54CC76;
}

span.purple {
    color: #7949B3;
}

span.yellow {
    color: #FFCA80;
}


</style>

<h2 id="_1">设计</h2>
<h3 id="_2"><span class="purple">目标</span></h3>
<ul>
<li><span class="green">简化逻辑</span>：边界清晰、无冗余逻辑、方便测试</li>
<li><span class="green">分布式</span>：容器化部署、无状态、可扩展、低耦合</li>
<li><span class="green">高用性</span>：机房多主、自动扩容、数据库最终一致</li>
</ul>
<h3 id="_3"><span class="purple">拆分</span></h3>
<ul>
<li><span class="yellow">业务</span>：代金券、活动</li>
<li><span class="yellow">支付中心</span>：商品管理、价格管理、发货路由</li>
<li><span class="green">支付网关</span>：下单、支付、代扣、通知、后督（<em>订单二次确认</em>）、对账、渠道服务</li>
</ul>
<h2 id="_4">实现</h2>
<h3 id="_5"><span class="purple">网关</span>体系</h3>
<ul>
<li>支付网关：接受下单请求、校验签名、生成订单、操作DB、调用渠道服务</li>
<li>代扣网关：处理签约请求、代扣请求、互斥逻辑</li>
<li>通知网关：处理渠道通知</li>
</ul>
<h3 id="_6">渠道服务集合</h3>
<h4 id="_7">原则</h4>
<ul>
<li>无db操作</li>
<li>无订单操作</li>
<li>只接受请求并响应对应数据</li>
<li>不关心上层逻辑</li>
</ul>
<h4 id="_8">微服务化</h4>
<ul>
<li>service:<ul>
<li>wechat</li>
<li>alipay</li>
<li>unionpay</li>
</ul>
</li>
<li>rpc:<ul>
<li>grpc://wechat:8080</li>
<li>grpc://alipay:8080</li>
<li><a href="http://unionpay:8080">http://unionpay:8080</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>渠道微服务化，可以在国际化业务中带来更便捷的差异化部署</p>
</blockquote>
<h4 id="_9">面向<span class="purple">协议</span>编程</h4>
<ul>
<li>pay(用户触发扣款或签约)<ul>
<li>method：alipay/wechat/unionpay</li>
<li>from: WEB/MWEB/APP/SDK/BANK/SERVER</li>
<li>type: pay/sign_pay</li>
</ul>
</li>
<li>confirm_pay(确认支付，用户二次验证)<ul>
<li>from</li>
<li>type</li>
<li>method</li>
</ul>
</li>
<li>refund(退款)</li>
<li>transfer(转账)</li>
</ul>
<h4 id="_10"><span class="purple">扩展</span>&amp;配置</h4>
<ul>
<li>etcd配置管理<ul>
<li>高可用</li>
<li>实时变更配置</li>
<li>跨地域同步</li>
</ul>
</li>
<li>简化配置<ul>
<li>使用field tag生成json</li>
<li>管理后台根据field json生成配置表单</li>
</ul>
</li>
</ul>
<p><svg alt="uml diagram" class="uml" contentStyleType="text/css" height="627px" preserveAspectRatio="none" style="background:#FFFFFF;" title="" version="1.1" viewBox="0 0 740 627" width="740px" zoomAndPan="magnify"><defs /><g><rect height="26.2969" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="339" x="193.75" y="5" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="329" x="198.75" y="22.9951">System Context diagram for Pay System</text><g id="cluster_company"><rect fill="#FFFFFF" height="384" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="503" x="7" y="237.0986" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="217" y="252.0938">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="84" x="216.5" y="270.2471">Company</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="88" x="214.5" y="285.1592">[Enterprise]</text></g><g id="elem_biz_system"><rect fill="#757575" height="120.1094" rx="2.5" ry="2.5" style="stroke:#616161;stroke-width:0.5;" width="208" x="286" y="304.0986" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="323" y="327.0938">&#171;external_system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154" x="313" y="345.2471">Business System</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="388" y="362.0156">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="180" x="300" y="378.3125">Allows customers to view</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="170" x="303" y="394.6094">information about their</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="113" x="333.5" y="410.9063">info and orders.</text></g><g id="elem_pay_center_system"><rect fill="#1976D2" height="87.5156" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.5;" width="192" x="23" y="320.0986" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68" x="85" y="343.0938">&#171;system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="172" x="33" y="361.2471">Pay center system</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="117" y="378.0156">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="139" x="51.5" y="394.3125">The system for biz.</text></g><g id="elem_pay_gateway_system"><rect fill="#1976D2" height="103.8125" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.5;" width="220" x="254" y="501.0986" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68" x="330" y="524.0938">&#171;system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="191" x="268.5" y="542.2471">Pay gateway System</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="362" y="559.0156">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="192" x="268" y="575.3125">The system for user to pay</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="107" x="310.5" y="591.6094">or auto_renew.</text></g><g id="elem_customer"><ellipse cx="390" cy="70.3955" fill="#1565C0" rx="8" ry="8" style="stroke:#0D47A1;stroke-width:1.0;" /><path d="M390,78.3955 L390,105.3955 M377,86.3955 L403,86.3955 M390,105.3955 L377,120.3955 M390,105.3955 L403,120.3955 " fill="none" style="stroke:#0D47A1;stroke-width:1.0;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="90" x="345" y="137.2471">Customer</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="388" y="154.0156">&#160;</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="31" x="376.5" y="170.3125">User</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67" x="356.5" y="58.0938">&#171;person&#187;</text></g><g id="elem_channel_system"><rect fill="#757575" height="103.8125" rx="2.5" ry="2.5" style="stroke:#616161;stroke-width:0.5;" width="205" x="529.5" y="312.0986" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="565" y="335.0938">&#171;external_system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="185" x="539.5" y="353.2471">Channel Pay System</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="630" y="370.0156">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="164" x="550" y="386.3125">The real pay system to</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="178" x="543" y="402.6094">handle users&rsquo; pay orders.</text></g><g id="link_customer_biz_system"><path d="M390,174.3146 C390,212.3456 390,260.5046 390,298.6616 " fill="none" id="customer-to-biz_system" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="390,303.7386,394,294.7386,390,298.7386,386,294.7386,390,303.7386" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118" x="391" y="217.1655">Show products.</text></g><g id="link_customer_pay_center_system"><path d="M344.956,152.2066 C327.466,168.3856 307.28,187.0886 289,204.0986 C248.467,241.8146 202.627,284.7026 168.771,316.4226 " fill="none" id="customer-to-pay_center_system" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="165.118,319.8446,174.4205,316.61,168.7667,316.426,168.9507,310.7721,165.118,319.8446" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="91" x="290" y="217.1655">Pay request</text></g><g id="link_pay_center_system_pay_gateway_system"><path d="M117.107,408.2936 C118.39,429.4036 123.452,453.8966 138,471.0986 C165.933,504.1266 208.36,523.6876 248.939,535.2726 " fill="none" id="pay_center_system-to-pay_gateway_system" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="253.877,536.6466,246.2782,530.381,249.0599,535.3066,244.1342,538.0883,253.877,536.6466" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="139" y="467.1655">Order request</text></g><g id="link_pay_gateway_system_pay_center_system"><path d="M310.515,501.0556 C293.269,485.4116 273.756,468.5316 255,454.0986 C235.688,439.2376 213.93,424.2746 193.572,410.9706 " fill="none" id="pay_gateway_system-to-pay_center_system" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="189.251,408.1576,194.61,416.4209,193.4409,410.8861,198.9756,409.717,189.251,408.1576" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="275" y="467.2373">Notify</text></g><g id="link_channel_system_pay_gateway_system"><path d="M592.871,420.3036 C578.354,438.1096 560.804,456.8936 542,471.0986 C521.546,486.5496 497.675,499.9316 474.18,511.1226 " fill="none" id="channel_system-backto-pay_gateway_system" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="596.113,416.2826,587.3512,420.7804,592.9756,420.1758,593.5802,425.8003,596.113,416.2826" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="560" y="467.1655">Order request</text></g><g id="link_channel_system_pay_gateway_system"><path d="M558.768,416.1976 C522.43,441.5526 478.528,472.1856 441.61,497.9456 " fill="none" id="channel_system-to-pay_gateway_system" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="437.144,501.0616,446.8136,499.191,441.2442,498.2001,442.2351,492.6307,437.144,501.0616" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="499" y="467.2373">Notify</text></g><g id="link_customer_channel_system"><path d="M435.1,138.3846 C460.953,155.5236 493.106,178.9826 518,204.0986 C548.893,235.2666 577.64,275.4726 598.539,307.6556 " fill="none" id="customer-to-channel_system" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="601.306,311.9406,599.7828,302.2103,598.5931,307.7406,593.0628,306.5509,601.306,311.9406" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="533" y="217.1655">Pay</text></g><g id="link_pay_center_system_biz_system"><path d="M215.308,364.0986 C236.434,364.0986 258.951,364.0986 280.551,364.0986 " fill="none" id="pay_center_system-to-biz_system" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="285.727,364.0986,276.727,360.0986,280.727,364.0986,276.727,368.0986,285.727,364.0986" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="233.5" y="358.2373">Notify</text></g></g></svg></p>
<h3 id="_11">支付网关系统</h3>
<p><svg alt="uml diagram" class="uml" contentStyleType="text/css" height="653px" preserveAspectRatio="none" style="background:#FFFFFF;" title="" version="1.1" viewBox="0 0 1012 653" width="1012px" zoomAndPan="magnify"><defs /><g><g id="cluster_sb"><rect fill="#FFFFFF" height="640" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="775" x="7" y="7" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="353" y="21.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="119" x="335" y="40.1484">Pay Gateway</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="64" x="362.5" y="55.0605">[System]</text></g><g id="elem_ag"><rect fill="#1E88E5" height="96.8281" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="204" x="453" y="74" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="512" y="96.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="114" x="498" y="115.1484">Api Gateway</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="160" x="473" y="130.0605">[Service discovery, Canary</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="180" x="463" y="144.0293">release, Parameters convert&hellip;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="172" x="469" y="157.998">Implements by ingress/zuul]</text></g><g id="elem_pg"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="125" x="393.5" y="239" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="413" y="261.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="105" x="403.5" y="280.1484">Pay Service</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="101" x="405.5" y="295.0605">[Generate order]</text></g><g id="elem_sg"><rect fill="#1E88E5" height="82.8594" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="200" x="554" y="232" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="611" y="254.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="110" x="599" y="273.1484">Sign Service</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="176" x="564" y="288.0605">[For Monthly/Quarterly/Yearly</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="98" x="605" y="302.0293">sign and renew]</text></g><g id="elem_cg"><rect fill="#1E88E5" height="82.8594" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="167" x="172.5" y="232" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="213" y="254.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="147" x="182.5" y="273.1484">Callback Service</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="136" x="186" y="288.0605">[Receive callback from</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="224.5" y="302.0293">channels.]</text></g><g id="elem_nf"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="149" x="23.5" y="557.5" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="55" y="580.4951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="129" x="33.5" y="598.6484">Notify Service</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="86" x="55" y="613.5605">[Notify to biz.]</text></g><g id="elem_os"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="183" x="339.5" y="397" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="388" y="419.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="163" x="349.5" y="438.1484">Order Supervision</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="127" x="367.5" y="453.0605">[Query order status.]</text></g><g id="elem_cs"><rect fill="#1E88E5" height="82.8594" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="208" x="558" y="390" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="619" y="412.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154" x="585" y="431.1484">Channel Services</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="184" x="568" y="446.0605">[Deliver pay requests between</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="151" x="586.5" y="460.0293">gateways and channels.]</text></g><g id="elem_ds"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="118" x="186" y="397" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="202" y="419.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="97" x="196.5" y="438.1484">DB Service</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="98" x="196" y="453.0605">[Db operations.]</text></g><g id="elem_mq"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="127" x="23.5" y="397" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="44" y="419.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="58" x="58" y="438.1484">Queue</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="107" x="33.5" y="453.0605">[Message queue.]</text></g><g id="elem_db"><path d="M247,563 C247,553 320,553 320,553 C320,553 393,553 393,563 L393,620.8906 C393,630.8906 320,630.8906 320,630.8906 C320,630.8906 247,630.8906 247,620.8906 L247,563 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M247,563 C247,573 320,573 320,573 C320,573 393,573 393,563 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="277" y="589.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="87" x="276.5" y="608.1484">Database</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="126" x="257" y="623.0605">[mysql,middlewares]</text></g><g id="elem_etcd"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="119" x="428.5" y="557.5" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="445" y="580.4951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="41" x="467.5" y="598.6484">etcd</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="99" x="438.5" y="613.5605">[Config system.]</text></g><g id="elem_pc"><rect fill="#757575" height="87.5156" rx="2.5" ry="2.5" style="stroke:#616161;stroke-width:0.5;" width="154" x="798" y="78.5" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="808" y="101.4951">&#171;external_system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="99" x="825.5" y="119.6484">Pay center</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="873" y="136.417">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="49" x="852.5" y="152.7139">For biz</text></g><g id="elem_ch"><rect fill="#757575" height="87.5156" rx="2.5" ry="2.5" style="stroke:#616161;stroke-width:0.5;" width="208" x="798" y="548" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="835" y="570.9951">&#171;external_system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="121" x="841.5" y="589.1484">Pay Channels</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="900" y="605.917">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="184" x="812" y="622.2139">wechat/alipay/unionpay&hellip;</text></g><g id="link_ag_pg"><path d="M523.404,171.054 C509.83,191.482 494.182,215.035 481.381,234.3 " fill="none" id="ag-to-pg" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="478.528,238.595,486.8406,233.3128,481.2952,234.4306,480.1775,228.8853,478.528,238.595" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_ag_sg"><path d="M586.596,171.054 C598.595,189.112 612.215,209.612 624.056,227.433 " fill="none" id="ag-to-sg" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="627.027,231.904,625.3775,222.1943,624.2598,227.7396,618.7144,226.6218,627.027,231.904" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_ag_cg"><path d="M459.572,171.054 C421.953,189.801 379.054,211.179 342.368,229.46 " fill="none" id="ag-to-cg" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="337.465,231.904,347.3043,231.4706,341.9403,229.6742,343.7367,224.3102,337.465,231.904" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_pg_ds"><path d="M410.476,308.158 C376.366,333.376 329.73,367.856 294.66,393.784 " fill="none" id="pg-to-ds" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="290.442,396.903,300.0571,394.77,294.4628,393.931,295.3018,388.3367,290.442,396.903" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_pg_cs"><path d="M500.445,308.158 C530.782,331.131 571.266,361.789 604.118,386.667 " fill="none" id="pg-to-cs" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="608.495,389.982,603.7339,381.3604,604.5086,386.964,598.905,387.7387,608.495,389.982" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_sg_ds"><path d="M553.677,308.995 C460.085,341.238 333.196,385.14 322,390 C317.726,391.855 313.365,393.851 308.999,395.927 " fill="none" id="sg-to-ds" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="304.263,398.208,314.1072,397.9066,308.7678,396.0384,310.636,390.699,304.263,398.208" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_sg_cs"><path d="M656.081,315.08 C657.174,336.392 658.517,362.589 659.648,384.635 " fill="none" id="sg-to-cs" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="659.916,389.853,663.4478,380.6592,659.6588,384.8596,655.4584,381.0706,659.916,389.853" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_cg_ds"><path d="M253.139,315.08 C251.47,338.748 249.376,368.441 247.73,391.782 " fill="none" id="cg-to-ds" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="247.365,396.964,251.9877,388.2674,247.7165,391.9764,244.0075,387.7051,247.365,396.964" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_cg_cs"><path d="M339.631,306.634 C401.404,330.37 486.05,362.893 553.104,388.658 " fill="none" id="cg-to-cs" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="557.901,390.501,550.9339,383.5397,553.2335,388.708,548.0652,391.0076,557.901,390.501" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_cg_mq"><path d="M190.885,315.13 C178.107,324.29 165.204,334.447 154,345 C138.942,359.182 124.487,376.908 112.884,392.536 " fill="none" id="cg-to-mq" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="109.688,396.884,118.2407,392.0002,112.6488,392.8549,111.7941,387.263,109.688,396.884" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="87" x="155" y="357.1387">Push message</text></g><g id="link_os_db"><path d="M407.46,466.114 C390.615,490.166 367.813,522.727 349.714,548.57 " fill="none" id="os-to-db" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="346.623,552.985,355.0624,547.9079,349.4914,548.8896,348.5097,543.3185,346.623,552.985" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="82" x="379" y="515.1387">Query orders</text></g><g id="link_mq_nf"><path d="M89.3328,466.114 C91.083,491.331 93.482,525.899 95.312,552.274 " fill="none" id="mq-to-nf" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="95.671,557.435,99.0366,548.179,95.3239,552.4471,91.0559,548.7344,95.671,557.435" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="79" x="94" y="515.1387">Pull message</text></g><g id="link_ds_db"><path d="M260.906,466.114 C272.24,490.067 287.567,522.458 299.771,548.249 " fill="none" id="ds-to-db" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="302.012,552.985,301.7786,543.1389,299.8736,548.4654,294.5472,546.5604,302.012,552.985" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_ag_pc"><path d="M662.413,122.5 C707.609,122.5 752.804,122.5 798,122.5 " fill="none" id="ag-backto-pc" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="657.188,122.5,666.188,126.5,662.188,122.5,666.188,118.5,657.188,122.5" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_cs_ch"><path d="M723.494,473.112 C756.859,495.146 798.213,522.457 832.713,545.242 " fill="none" id="cs-to-ch" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="836.886,547.997,831.5814,539.6987,832.7141,545.241,827.1718,546.3737,836.886,547.997" style="stroke:#616161;stroke-width:1.0;" /></g></g></svg></p>
<h3 id="_12">支付调用时序图</h3>
<p><svg alt="uml diagram" class="uml" contentStyleType="text/css" height="1344px" preserveAspectRatio="none" style="background:#FFFFFF;" title="" version="1.1" viewBox="0 0 1041 1344" width="1041px" zoomAndPan="magnify"><defs /><g><rect fill="#DDDDDD" height="1332.5781" style="stroke:#181818;stroke-width:0.5;" width="768.5" x="261" y="6" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127" x="581.75" y="18.9951">Internal Service</text><rect fill="#FFFFFF" height="375.5938" style="stroke:#008000;stroke-width:1.0;" width="10" x="189.5" y="118.5625" /><rect fill="#FFFFFF" height="305.6875" style="stroke:#008000;stroke-width:1.0;" width="10" x="310.5" y="146.5313" /><rect fill="#FFFFFF" height="671.1875" style="stroke:#008000;stroke-width:1.0;" width="10" x="439.5" y="578.0938" /><rect fill="#FFFFFF" height="55.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="570" y="368.3125" /><rect fill="#FFFFFF" height="68.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="570" y="606.0625" /><rect fill="#FFFFFF" height="55.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="692" y="814.8438" /><rect fill="#FFFFFF" height="286.5938" style="stroke:#008000;stroke-width:1.0;" width="10" x="692" y="954.6875" /><rect fill="#FFFFFF" height="83.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="842" y="256.4375" /><rect fill="#FFFFFF" height="83.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="842" y="702.9688" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="932.5" y="284.4063" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="932.5" y="730.9375" /><rect fill="#E3F2FD" height="271.5938" style="stroke:#424242;stroke-width:1.0;" width="931.5" x="104" y="969.6875" /><rect fill="#E3F2FD" height="183.3594" style="stroke:#424242;stroke-width:1.0;" width="796.5" x="114" y="1050.9219" /><rect fill="#E3F2FD" height="79.8594" style="stroke:none;stroke-width:1.0;" width="796.5" x="114" y="1154.4219" /><rect fill="#E3F2FD" height="47.5625" style="stroke:#424242;stroke-width:1.0;" width="643" x="124" y="1179.7188" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="23" x2="23" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="88" x2="88" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="194" x2="194" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="194" x2="194" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="194" x2="194" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="315" x2="315" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="315" x2="315" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="315" x2="315" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="444" x2="444" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="444" x2="444" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="444" x2="444" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="575" x2="575" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="575" x2="575" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="575" x2="575" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="697" x2="697" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="697" x2="697" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="697" x2="697" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="846.5" x2="846.5" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="846.5" x2="846.5" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="846.5" x2="846.5" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="937.5" x2="937.5" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="937.5" x2="937.5" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="937.5" x2="937.5" y1="530.1563" y2="1258.2813" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="999.5" x2="999.5" y1="88.5938" y2="502.1563" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="999.5" x2="999.5" y1="502.1563" y2="530.1563" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="999.5" x2="999.5" y1="530.1563" y2="1258.2813" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="85.292">User</text><ellipse cx="23.5" cy="20.2969" fill="#1565C0" rx="8" ry="8" style="stroke:#1565C0;stroke-width:1.0;" /><path d="M23.5,28.2969 L23.5,55.2969 M10.5,36.2969 L36.5,36.2969 M23.5,55.2969 L10.5,70.2969 M23.5,55.2969 L36.5,70.2969 " fill="none" style="stroke:#1565C0;stroke-width:1.0;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="1270.2764">User</text><ellipse cx="23.5" cy="1282.5781" fill="#1565C0" rx="8" ry="8" style="stroke:#1565C0;stroke-width:1.0;" /><path d="M23.5,1290.5781 L23.5,1317.5781 M10.5,1298.5781 L36.5,1298.5781 M23.5,1317.5781 L10.5,1332.5781 M23.5,1317.5781 L36.5,1332.5781 " fill="none" style="stroke:#1565C0;stroke-width:1.0;" /><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="72" x="52" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="58" x="59" y="77.292">Channel</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="72" x="52" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="58" x="59" y="1277.2764">Channel</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="121" x="134" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="107" x="141" y="77.292">PayCenter(Biz)</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="121" x="134" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="107" x="141" y="1277.2764">PayCenter(Biz)</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="101" x="265" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="87" x="272" y="77.292">PayGateway</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="101" x="265" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="87" x="272" y="1277.2764">PayGateway</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="137" x="376" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="123" x="383" y="77.292">CallbackGateway</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="137" x="376" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="123" x="383" y="1277.2764">CallbackGateway</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="104" x="523" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="90" x="530" y="77.292">PayChannels</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="104" x="523" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="90" x="530" y="1277.2764">PayChannels</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="120" x="637" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="106" x="644" y="77.292">NotifyGateway</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="120" x="637" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="106" x="644" y="1277.2764">NotifyGateway</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="107" x="793.5" y="57.2969" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="93" x="800.5" y="77.292">PayDatabase</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="107" x="793.5" y="1257.2813" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="93" x="800.5" y="1277.2764">PayDatabase</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="48" x="910.5" y="85.292">MySQL</text><path d="M919.5,36.2969 C919.5,26.2969 937.5,26.2969 937.5,26.2969 C937.5,26.2969 955.5,26.2969 955.5,36.2969 L955.5,62.2969 C955.5,72.2969 937.5,72.2969 937.5,72.2969 C937.5,72.2969 919.5,72.2969 919.5,62.2969 L919.5,36.2969 " fill="#E3F2FD" style="stroke:#424242;stroke-width:1.5;" /><path d="M919.5,36.2969 C919.5,46.2969 937.5,46.2969 937.5,46.2969 C937.5,46.2969 955.5,46.2969 955.5,36.2969 " fill="none" style="stroke:#424242;stroke-width:1.5;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="48" x="910.5" y="1270.2764">MySQL</text><path d="M919.5,1283.5781 C919.5,1273.5781 937.5,1273.5781 937.5,1273.5781 C937.5,1273.5781 955.5,1273.5781 955.5,1283.5781 L955.5,1309.5781 C955.5,1319.5781 937.5,1319.5781 937.5,1319.5781 C937.5,1319.5781 919.5,1319.5781 919.5,1309.5781 L919.5,1283.5781 " fill="#E3F2FD" style="stroke:#424242;stroke-width:1.5;" /><path d="M919.5,1283.5781 C919.5,1293.5781 937.5,1293.5781 937.5,1293.5781 C937.5,1293.5781 955.5,1293.5781 955.5,1283.5781 " fill="none" style="stroke:#424242;stroke-width:1.5;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="45" x="974.5" y="85.292">Queue</text><ellipse cx="1000" cy="56.2969" fill="#E3F2FD" rx="12" ry="12" style="stroke:#424242;stroke-width:0.5;" /><polygon fill="#424242" points="996,44.2969,1002,39.2969,1000,44.2969,1002,49.2969,996,44.2969" style="stroke:#424242;stroke-width:1.0;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="45" x="974.5" y="1270.2764">Queue</text><ellipse cx="1000" cy="1289.5781" fill="#E3F2FD" rx="12" ry="12" style="stroke:#424242;stroke-width:0.5;" /><polygon fill="#424242" points="996,1277.5781,1002,1272.5781,1000,1277.5781,1002,1282.5781,996,1277.5781" style="stroke:#424242;stroke-width:1.0;" /><rect fill="#FFFFFF" height="375.5938" style="stroke:#008000;stroke-width:1.0;" width="10" x="189.5" y="118.5625" /><rect fill="#FFFFFF" height="305.6875" style="stroke:#008000;stroke-width:1.0;" width="10" x="310.5" y="146.5313" /><rect fill="#FFFFFF" height="671.1875" style="stroke:#008000;stroke-width:1.0;" width="10" x="439.5" y="578.0938" /><rect fill="#FFFFFF" height="55.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="570" y="368.3125" /><rect fill="#FFFFFF" height="68.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="570" y="606.0625" /><rect fill="#FFFFFF" height="55.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="692" y="814.8438" /><rect fill="#FFFFFF" height="286.5938" style="stroke:#008000;stroke-width:1.0;" width="10" x="692" y="954.6875" /><rect fill="#FFFFFF" height="83.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="842" y="256.4375" /><rect fill="#FFFFFF" height="83.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="842" y="702.9688" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="932.5" y="284.4063" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="932.5" y="730.9375" /><polygon fill="#616161" points="177.5,114.5625,187.5,118.5625,177.5,122.5625,181.5,118.5625" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="23.5" x2="183.5" y1="118.5625" y2="118.5625" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="29" x="92" y="113.7324">Page</text><polygon fill="#616161" points="298.5,142.5313,308.5,146.5313,298.5,150.5313,302.5,146.5313" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="199.5" x2="304.5" y1="146.5313" y2="146.5313" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="80" x="215" y="141.7012">Create Order</text><line style="stroke:#616161;stroke-width:1.0;" x1="320.5" x2="362.5" y1="174.5" y2="174.5" /><line style="stroke:#616161;stroke-width:1.0;" x1="362.5" x2="362.5" y1="174.5" y2="187.5" /><line style="stroke:#616161;stroke-width:1.0;" x1="321.5" x2="362.5" y1="187.5" y2="187.5" /><polygon fill="#616161" points="331.5,183.5,321.5,187.5,331.5,191.5,327.5,187.5" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="35" x="327.5" y="169.6699">Verify</text><line style="stroke:#616161;stroke-width:1.0;" x1="320.5" x2="362.5" y1="215.4688" y2="215.4688" /><line style="stroke:#616161;stroke-width:1.0;" x1="362.5" x2="362.5" y1="215.4688" y2="228.4688" /><line style="stroke:#616161;stroke-width:1.0;" x1="321.5" x2="362.5" y1="228.4688" y2="228.4688" /><polygon fill="#616161" points="331.5,224.4688,321.5,228.4688,331.5,232.4688,327.5,228.4688" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="96" x="327.5" y="210.6387">Generate Order</text><polygon fill="#616161" points="830,252.4375,840,256.4375,830,260.4375,834,256.4375" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="320.5" x2="836" y1="256.4375" y2="256.4375" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="70" x="546.25" y="251.6074">Save Order</text><polygon fill="#616161" points="920.5,280.4063,930.5,284.4063,920.5,288.4063,924.5,284.4063" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="852" x2="926.5" y1="284.4063" y2="284.4063" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="24" x="880.25" y="279.5762">SQL</text><polygon fill="#616161" points="863,308.375,853,312.375,863,316.375,859,312.375" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="857" x2="936.5" y1="312.375" y2="312.375" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="885.75" y="307.5449">OK</text><polygon fill="#616161" points="331.5,336.3438,321.5,340.3438,331.5,344.3438,327.5,340.3438" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="325.5" x2="846" y1="340.3438" y2="340.3438" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="574.75" y="335.5137">OK</text><polygon fill="#616161" points="558,364.3125,568,368.3125,558,372.3125,562,368.3125" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="320.5" x2="564" y1="368.3125" y2="368.3125" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="89" x="400.75" y="363.4824">Order Request</text><polygon fill="#616161" points="99,392.2813,89,396.2813,99,400.2813,95,396.2813" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="93" x2="569" y1="396.2813" y2="396.2813" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="89" x="284.5" y="391.4512">Order Request</text><polygon fill="#616161" points="331.5,420.25,321.5,424.25,331.5,428.25,327.5,424.25" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="325.5" x2="574" y1="424.25" y2="424.25" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="91" x="402.25" y="419.4199">Response Data</text><polygon fill="#616161" points="210.5,448.2188,200.5,452.2188,210.5,456.2188,206.5,452.2188" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="204.5" x2="314.5" y1="452.2188" y2="452.2188" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="60" x="227.5" y="447.3887">Response</text><polygon fill="#616161" points="34.5,490.1563,24.5,494.1563,34.5,498.1563,30.5,494.1563" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="28.5" x2="193.5" y1="494.1563" y2="494.1563" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="101" x="56.5" y="475.3574">Show QrCode or</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="67" x="75.5" y="489.3262">redirect url</text><polygon fill="#616161" points="76,546.125,86,550.125,76,554.125,80,550.125" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="23.5" x2="82" y1="550.125" y2="550.125" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="20" x="45.75" y="545.2949">Pay</text><polygon fill="#616161" points="427.5,574.0938,437.5,578.0938,427.5,582.0938,431.5,578.0938" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="88" x2="433.5" y1="578.0938" y2="578.0938" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="246.75" y="573.2637">Notify</text><polygon fill="#616161" points="558,602.0625,568,606.0625,558,610.0625,562,606.0625" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="449.5" x2="564" y1="606.0625" y2="606.0625" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="492.75" y="601.2324">Notify</text><line style="stroke:#616161;stroke-width:1.0;" x1="580" x2="622" y1="634.0313" y2="634.0313" /><line style="stroke:#616161;stroke-width:1.0;" x1="622" x2="622" y1="634.0313" y2="647.0313" /><line style="stroke:#616161;stroke-width:1.0;" x1="581" x2="622" y1="647.0313" y2="647.0313" /><polygon fill="#616161" points="591,643.0313,581,647.0313,591,651.0313,587,647.0313" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="35" x="587" y="629.2012">Verify</text><polygon fill="#616161" points="460.5,671,450.5,675,460.5,679,456.5,675" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="454.5" x2="574" y1="675" y2="675" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="503.25" y="670.1699">OK</text><polygon fill="#616161" points="830,698.9688,840,702.9688,830,706.9688,834,702.9688" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="449.5" x2="836" y1="702.9688" y2="702.9688" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="44" x="623.75" y="698.1387">Update</text><polygon fill="#616161" points="920.5,726.9375,930.5,730.9375,920.5,734.9375,924.5,730.9375" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="852" x2="926.5" y1="730.9375" y2="730.9375" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="24" x="880.25" y="726.1074">SQL</text><polygon fill="#616161" points="863,754.9063,853,758.9063,863,762.9063,859,758.9063" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="857" x2="936.5" y1="758.9063" y2="758.9063" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="885.75" y="754.0762">OK</text><polygon fill="#616161" points="460.5,782.875,450.5,786.875,460.5,790.875,456.5,786.875" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="454.5" x2="846" y1="786.875" y2="786.875" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="639.25" y="782.0449">OK</text><polygon fill="#616161" points="680,810.8438,690,814.8438,680,818.8438,684,814.8438" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="449.5" x2="686" y1="814.8438" y2="814.8438" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="86" x="527.75" y="810.0137">Process result</text><polygon fill="#616161" points="988,838.8125,998,842.8125,988,846.8125,992,842.8125" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="702" x2="994" y1="842.8125" y2="842.8125" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="29" x="836.5" y="837.9824">push</text><polygon fill="#616161" points="460.5,866.7813,450.5,870.7813,460.5,874.7813,456.5,870.7813" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="454.5" x2="696" y1="870.7813" y2="870.7813" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="564.25" y="865.9512">OK</text><polygon fill="#616161" points="99,894.75,89,898.75,99,902.75,95,898.75" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="93" x2="438.5" y1="898.75" y2="898.75" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="254.75" y="893.9199">OK</text><polygon fill="#616161" points="182.5,922.7188,192.5,926.7188,182.5,930.7188,186.5,926.7188" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="88" x2="188.5" y1="926.7188" y2="926.7188" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="71" x="105.75" y="921.8887">Redirect Url</text><polygon fill="#616161" points="34.5,950.6875,24.5,954.6875,34.5,958.6875,30.5,954.6875" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="28.5" x2="193.5" y1="954.6875" y2="954.6875" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="126" x="46" y="949.8574">Show PayResult Page</text><path d="M104,969.6875 L184,969.6875 L184,977.9844 L174,987.9844 L104,987.9844 L104,969.6875 " fill="#BBDEFB" style="stroke:#1565C0;stroke-width:1.5;" /><rect fill="none" height="271.5938" style="stroke:#424242;stroke-width:1.0;" width="931.5" x="104" y="969.6875" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="35" x="119" y="983.6826">loop</text><polygon fill="#616161" points="988,1003.9531,998,1007.9531,988,1011.9531,992,1007.9531" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="702" x2="994" y1="1007.9531" y2="1007.9531" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="21" x="840.5" y="1003.123">pull</text><polygon fill="#616161" points="205.5,1031.9219,195.5,1035.9219,205.5,1039.9219,201.5,1035.9219" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="691" y1="1035.9219" y2="1035.9219" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="426.25" y="1031.0918">Notify</text><path d="M114,1050.9219 L182,1050.9219 L182,1059.2188 L172,1069.2188 L114,1069.2188 L114,1050.9219 " fill="#BBDEFB" style="stroke:#1565C0;stroke-width:1.5;" /><rect fill="none" height="183.3594" style="stroke:#424242;stroke-width:1.0;" width="796.5" x="114" y="1050.9219" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="23" x="129" y="1064.917">alt</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="131" x="197" y="1065.917">[notify success]</text><polygon fill="#616161" points="680,1086.4844,690,1090.4844,680,1094.4844,684,1090.4844" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="194.5" x2="686" y1="1090.4844" y2="1090.4844" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="434.25" y="1085.6543">OK</text><polygon fill="#616161" points="835,1114.4531,845,1118.4531,835,1122.4531,839,1118.4531" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="702" x2="841" y1="1118.4531" y2="1118.4531" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="121" x="714" y="1113.623">Update notify status</text><polygon fill="#616161" points="713,1142.4219,703,1146.4219,713,1150.4219,709,1146.4219" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="707" x2="846" y1="1146.4219" y2="1146.4219" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="765.5" y="1141.5918">OK</text><line style="stroke:#424242;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="114" x2="910.5" y1="1155.4219" y2="1155.4219" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113" x="119" y="1168.417">[notify failed]</text><path d="M124,1179.7188 L204,1179.7188 L204,1188.0156 L194,1198.0156 L124,1198.0156 L124,1179.7188 " fill="#BBDEFB" style="stroke:#1565C0;stroke-width:1.5;" /><rect fill="none" height="47.5625" style="stroke:#424242;stroke-width:1.0;" width="643" x="124" y="1179.7188" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="35" x="139" y="1193.7139">loop</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="219" y="1194.7139">[10 times]</text><polygon fill="#616161" points="205.5,1215.2813,195.5,1219.2813,205.5,1223.2813,201.5,1219.2813" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="691" y1="1219.2813" y2="1219.2813" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="426.25" y="1214.4512">Notify</text></g></svg></p>
<h3 id="_13">签约</h3>
<p><svg alt="uml diagram" class="uml" contentStyleType="text/css" height="1444px" preserveAspectRatio="none" style="background:#FFFFFF;" title="" version="1.1" viewBox="0 0 1276 1444" width="1276px" zoomAndPan="magnify"><defs /><g><rect fill="#DDDDDD" height="1432.2188" style="stroke:#181818;stroke-width:0.5;" width="805.5" x="465" y="6" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127" x="804.25" y="18.9951">Internal Service</text><rect fill="#FFFFFF" height="348.625" style="stroke:#008000;stroke-width:1.0;" width="10" x="393.5" y="795.5156" /><rect fill="#FFFFFF" height="55.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="393.5" y="1256.0156" /><rect fill="#FFFFFF" height="208.7813" style="stroke:#008000;stroke-width:1.0;" width="10" x="510" y="907.3906" /><rect fill="#FFFFFF" height="222.75" style="stroke:#008000;stroke-width:1.0;" width="10" x="615" y="154.2031" /><rect fill="#FFFFFF" height="320.6563" style="stroke:#008000;stroke-width:1.0;" width="10" x="615" y="823.4844" /><rect fill="#FFFFFF" height="167.8125" style="stroke:#008000;stroke-width:1.0;" width="10" x="738" y="1172.1094" /><rect fill="#FFFFFF" height="195.7813" style="stroke:#008000;stroke-width:1.0;" width="10" x="891.5" y="488.8594" /><rect fill="#FFFFFF" height="96.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="1047" y="252.0781" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1047" y="572.7656" /><rect fill="#FFFFFF" height="96.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="1047" y="991.2969" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="196.1406" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="516.8281" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="628.7031" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="851.4531" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="935.3594" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="23" x2="23" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="113.5" x2="113.5" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="113.5" x2="113.5" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="113.5" x2="113.5" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="240.5" x2="240.5" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="240.5" x2="240.5" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="240.5" x2="240.5" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="398" x2="398" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="398" x2="398" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="398" x2="398" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="515" x2="515" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="515" x2="515" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="515" x2="515" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="620" x2="620" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="620" x2="620" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="620" x2="620" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="743" x2="743" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="743" x2="743" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="743" x2="743" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="896" x2="896" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="896" x2="896" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="896" x2="896" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1052" x2="1052" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1052" x2="1052" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1052" x2="1052" y1="440.9219" y2="1357.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1212.5" x2="1212.5" y1="82.2969" y2="412.9219" /><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1212.5" x2="1212.5" y1="412.9219" y2="440.9219" /><line style="stroke:#008000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1212.5" x2="1212.5" y1="440.9219" y2="1357.9219" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="78.9951">User</text><ellipse cx="23.5" cy="14" fill="#1565C0" rx="8" ry="8" style="stroke:#1565C0;stroke-width:1.0;" /><path d="M23.5,22 L23.5,49 M10.5,30 L36.5,30 M23.5,49 L10.5,64 M23.5,49 L36.5,64 " fill="none" style="stroke:#1565C0;stroke-width:1.0;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="1369.917">User</text><ellipse cx="23.5" cy="1382.2188" fill="#1565C0" rx="8" ry="8" style="stroke:#1565C0;stroke-width:1.0;" /><path d="M23.5,1390.2188 L23.5,1417.2188 M10.5,1398.2188 L36.5,1398.2188 M23.5,1417.2188 L10.5,1432.2188 M23.5,1417.2188 L36.5,1432.2188 " fill="none" style="stroke:#1565C0;stroke-width:1.0;" /><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="72" x="77.5" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="58" x="84.5" y="70.9951">Channel</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="72" x="77.5" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="58" x="84.5" y="1376.917">Channel</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="162" x="159.5" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="148" x="166.5" y="70.9951">VirtualAssetsSystem</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="162" x="159.5" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="148" x="166.5" y="1376.917">VirtualAssetsSystem</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="121" x="338" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="107" x="345" y="70.9951">PayCenter(Biz)</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="121" x="338" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="107" x="345" y="1376.917">PayCenter(Biz)</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="92" x="469" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="78" x="476" y="70.9951">PayService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="92" x="469" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="78" x="476" y="1376.917">PayService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="98" x="571" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="84" x="578" y="70.9951">SignService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="98" x="571" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="84" x="578" y="1376.917">SignService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="128" x="679" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="114" x="686" y="70.9951">CallbackService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="128" x="679" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="114" x="686" y="1376.917">CallbackService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="159" x="817" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="145" x="824" y="70.9951">SignCallbackService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="159" x="817" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="145" x="824" y="1376.917">SignCallbackService</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="132" x="986" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="118" x="993" y="70.9951">ChannelServices</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="132" x="986" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="118" x="993" y="1376.917">ChannelServices</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="107" x="1159.5" y="51" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="93" x="1166.5" y="70.9951">PayDatabase</text><rect fill="#1565C0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.0;" width="107" x="1159.5" y="1356.9219" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="93" x="1166.5" y="1376.917">PayDatabase</text><rect fill="#FFFFFF" height="348.625" style="stroke:#008000;stroke-width:1.0;" width="10" x="393.5" y="795.5156" /><rect fill="#FFFFFF" height="55.9375" style="stroke:#008000;stroke-width:1.0;" width="10" x="393.5" y="1256.0156" /><rect fill="#FFFFFF" height="208.7813" style="stroke:#008000;stroke-width:1.0;" width="10" x="510" y="907.3906" /><rect fill="#FFFFFF" height="222.75" style="stroke:#008000;stroke-width:1.0;" width="10" x="615" y="154.2031" /><rect fill="#FFFFFF" height="320.6563" style="stroke:#008000;stroke-width:1.0;" width="10" x="615" y="823.4844" /><rect fill="#FFFFFF" height="167.8125" style="stroke:#008000;stroke-width:1.0;" width="10" x="738" y="1172.1094" /><rect fill="#FFFFFF" height="195.7813" style="stroke:#008000;stroke-width:1.0;" width="10" x="891.5" y="488.8594" /><rect fill="#FFFFFF" height="96.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="1047" y="252.0781" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1047" y="572.7656" /><rect fill="#FFFFFF" height="96.9063" style="stroke:#008000;stroke-width:1.0;" width="10" x="1047" y="991.2969" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="196.1406" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="516.8281" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="628.7031" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="851.4531" /><rect fill="#FFFFFF" height="27.9688" style="stroke:#008000;stroke-width:1.0;" width="10" x="1208" y="935.3594" /><polygon fill="#616161" points="386.5,108.2656,396.5,112.2656,386.5,116.2656,390.5,112.2656" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="23.5" x2="392.5" y1="112.2656" y2="112.2656" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="8" x="166.5" y="107.4355">1</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="77" x="178.5" y="107.4355">Sign request</text><polygon fill="#616161" points="603,150.2031,613,154.2031,603,158.2031,607,154.2031" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="398.5" x2="609" y1="154.2031" y2="154.2031" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="8" x="440.25" y="142.3887">2</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="101" x="460.25" y="135.4043">Sign(app_id, uid,</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="121" x="452.25" y="149.373">product_id, amount)</text><polygon fill="#616161" points="1196,192.1406,1206,196.1406,1196,200.1406,1200,196.1406" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="625" x2="1202" y1="196.1406" y2="196.1406" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="8" x="848.5" y="184.3262">3</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="120" x="860.5" y="177.3418">IsExists(uid, app_id,</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="123" x="861" y="191.3105">product_id, channel)</text><polygon fill="#616161" points="636,220.1094,626,224.1094,636,228.1094,632,224.1094" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="630" x2="1212" y1="224.1094" y2="224.1094" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="9" x="903.5" y="219.2793">4</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="916.5" y="219.2793">OK</text><polygon fill="#616161" points="1035,248.0781,1045,252.0781,1035,256.0781,1039,252.0781" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="625" x2="1041" y1="252.0781" y2="252.0781" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="8" x="791.5" y="247.248">5</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="77" x="803.5" y="247.248">Sign request</text><line style="stroke:#616161;stroke-width:1.0;" x1="1057" x2="1099" y1="280.0469" y2="280.0469" /><line style="stroke:#616161;stroke-width:1.0;" x1="1099" x2="1099" y1="280.0469" y2="293.0469" /><line style="stroke:#616161;stroke-width:1.0;" x1="1058" x2="1099" y1="293.0469" y2="293.0469" /><polygon fill="#616161" points="1068,289.0469,1058,293.0469,1068,297.0469,1064,293.0469" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1064" y="275.2168">6</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="85" x="1077" y="275.2168">Generate sign</text><polygon fill="#616161" points="124.5,317.0156,114.5,321.0156,124.5,325.0156,120.5,321.0156" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="118.5" x2="1046" y1="321.0156" y2="321.0156" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="9" x="535.25" y="316.1855">7</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="77" x="548.25" y="316.1855">Sign request</text><polygon fill="#616161" points="636,344.9844,626,348.9844,636,352.9844,632,348.9844" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="630" x2="1051" y1="348.9844" y2="348.9844" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="9" x="802" y="344.1543">8</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="60" x="815" y="344.1543">Response</text><polygon fill="#616161" points="409.5,372.9531,399.5,376.9531,409.5,380.9531,405.5,376.9531" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="403.5" x2="619" y1="376.9531" y2="376.9531" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="9" x="457.75" y="372.123">9</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="90" x="470.75" y="372.123">Response data</text><polygon fill="#616161" points="34.5,400.9219,24.5,404.9219,34.5,408.9219,30.5,404.9219" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="397.5" y1="404.9219" y2="404.9219" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="128" y="400.0918">10</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="145" x="149" y="400.0918">Show QR or direct to url</text><polygon fill="#616161" points="101.5,456.8906,111.5,460.8906,101.5,464.8906,105.5,460.8906" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="23.5" x2="107.5" y1="460.8906" y2="460.8906" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35.5" y="456.0605">11</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="46" x="55.5" y="456.0605">Confirm</text><polygon fill="#616161" points="879.5,484.8594,889.5,488.8594,879.5,492.8594,883.5,488.8594" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="113.5" x2="885.5" y1="488.8594" y2="488.8594" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="475.5" y="484.0293">12</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="495.5" y="484.0293">Notify</text><polygon fill="#616161" points="1196,512.8281,1206,516.8281,1196,520.8281,1200,516.8281" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="901.5" x2="1202" y1="516.8281" y2="516.8281" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="989.25" y="511.998">13</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="111" x="1009.25" y="511.998">Query sign record</text><polygon fill="#616161" points="912.5,540.7969,902.5,544.7969,912.5,548.7969,908.5,544.7969" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="906.5" x2="1212" y1="544.7969" y2="544.7969" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1037.75" y="539.9668">14</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="1058.75" y="539.9668">OK</text><polygon fill="#616161" points="1035,568.7656,1045,572.7656,1035,576.7656,1039,572.7656" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="901.5" x2="1041" y1="572.7656" y2="572.7656" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="946.75" y="567.9355">15</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="35" x="966.75" y="567.9355">Verify</text><polygon fill="#616161" points="912.5,596.7344,902.5,600.7344,912.5,604.7344,908.5,600.7344" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="906.5" x2="1051" y1="600.7344" y2="600.7344" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="957.25" y="595.9043">16</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="978.25" y="595.9043">OK</text><polygon fill="#616161" points="1196,624.7031,1206,628.7031,1196,632.7031,1200,628.7031" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="901.5" x2="1202" y1="628.7031" y2="628.7031" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1002.25" y="623.873">17</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="84" x="1023.25" y="623.873">Update status</text><polygon fill="#616161" points="912.5,652.6719,902.5,656.6719,912.5,660.6719,908.5,656.6719" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="906.5" x2="1212" y1="656.6719" y2="656.6719" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1037.75" y="651.8418">18</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="1058.75" y="651.8418">OK</text><polygon fill="#616161" points="124.5,680.6406,114.5,684.6406,124.5,688.6406,120.5,684.6406" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="118.5" x2="895.5" y1="684.6406" y2="684.6406" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="485.5" y="679.8105">19</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="506.5" y="679.8105">OK</text><polygon fill="#616161" points="34.5,708.6094,24.5,712.6094,34.5,716.6094,30.5,712.6094" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="112.5" y1="712.6094" y2="712.6094" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="40" y="707.7793">20</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="36" x="61" y="707.7793">Direct</text><line style="stroke:#616161;stroke-width:1.0;" x1="240.5" x2="282.5" y1="740.5781" y2="740.5781" /><line style="stroke:#616161;stroke-width:1.0;" x1="282.5" x2="282.5" y1="740.5781" y2="753.5781" /><line style="stroke:#616161;stroke-width:1.0;" x1="241.5" x2="282.5" y1="753.5781" y2="753.5781" /><polygon fill="#616161" points="251.5,749.5781,241.5,753.5781,251.5,757.5781,247.5,753.5781" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="247.5" y="735.748">21</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="80" x="267.5" y="735.748">Check expire</text><polygon fill="#616161" points="381.5,791.5156,391.5,795.5156,381.5,799.5156,385.5,795.5156" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="240.5" x2="387.5" y1="795.5156" y2="795.5156" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="250" y="783.7012">22</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="110" x="270" y="776.7168">Expire events(uid,</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="69" x="292.5" y="790.6855">product_id)</text><polygon fill="#616161" points="603,819.4844,613,823.4844,603,827.4844,607,823.4844" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="403.5" x2="609" y1="823.4844" y2="823.4844" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="440.25" y="818.6543">23</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="118" x="460.25" y="818.6543">Renew(uid, sign_id)</text><polygon fill="#616161" points="1196,847.4531,1206,851.4531,1196,855.4531,1200,851.4531" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="625" x2="1202" y1="851.4531" y2="851.4531" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="850.5" y="846.623">24</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="111" x="871.5" y="846.623">Query sign record</text><polygon fill="#616161" points="636,875.4219,626,879.4219,636,883.4219,632,879.4219" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="630" x2="1212" y1="879.4219" y2="879.4219" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="900" y="874.5918">25</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="920" y="874.5918">OK</text><polygon fill="#616161" points="531,903.3906,521,907.3906,531,911.3906,527,907.3906" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="614" y1="907.3906" y2="907.3906" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="547" y="902.5605">26</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="20" x="568" y="902.5605">Pay</text><polygon fill="#616161" points="1196,931.3594,1206,935.3594,1196,939.3594,1200,935.3594" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="520" x2="1202" y1="935.3594" y2="935.3594" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="806.5" y="930.5293">27</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="94" x="827.5" y="930.5293">Generate order</text><polygon fill="#616161" points="531,959.3281,521,963.3281,531,967.3281,527,963.3281" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="1212" y1="963.3281" y2="963.3281" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="847" y="958.498">28</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="868" y="958.498">OK</text><polygon fill="#616161" points="1035,987.2969,1045,991.2969,1035,995.2969,1039,991.2969" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="520" x2="1041" y1="991.2969" y2="991.2969" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="729.5" y="986.4668">29</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="87" x="750.5" y="986.4668">Order request</text><line style="stroke:#616161;stroke-width:1.0;" x1="1057" x2="1099" y1="1019.2656" y2="1019.2656" /><line style="stroke:#616161;stroke-width:1.0;" x1="1099" x2="1099" y1="1019.2656" y2="1032.2656" /><line style="stroke:#616161;stroke-width:1.0;" x1="1058" x2="1099" y1="1032.2656" y2="1032.2656" /><polygon fill="#616161" points="1068,1028.2656,1058,1032.2656,1068,1036.2656,1064,1032.2656" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1064" y="1014.4355">30</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="116" x="1085" y="1014.4355">Generate message</text><polygon fill="#616161" points="124.5,1056.2344,114.5,1060.2344,124.5,1064.2344,120.5,1060.2344" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="118.5" x2="1046" y1="1060.2344" y2="1060.2344" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="526.75" y="1055.4043">31</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="87" x="546.75" y="1055.4043">Order request</text><polygon fill="#616161" points="531,1084.2031,521,1088.2031,531,1092.2031,527,1088.2031" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="1051" y1="1088.2031" y2="1088.2031" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="767" y="1083.373">32</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="787" y="1083.373">OK</text><polygon fill="#616161" points="603,1112.1719,613,1116.1719,603,1120.1719,607,1116.1719" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="515" x2="609" y1="1116.1719" y2="1116.1719" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="546" y="1111.3418">33</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="566" y="1111.3418">OK</text><polygon fill="#616161" points="409.5,1140.1406,399.5,1144.1406,409.5,1148.1406,405.5,1144.1406" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="403.5" x2="619" y1="1144.1406" y2="1144.1406" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="489.75" y="1139.3105">34</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="18" x="510.75" y="1139.3105">OK</text><polygon fill="#616161" points="726,1168.1094,736,1172.1094,726,1176.1094,730,1172.1094" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="113.5" x2="732" y1="1172.1094" y2="1172.1094" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="16" x="398.75" y="1167.2793">35</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="418.75" y="1167.2793">Notify</text><polygon fill="#616161" points="1201,1196.0781,1211,1200.0781,1201,1204.0781,1205,1200.0781" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="748" x2="1207" y1="1200.0781" y2="1200.0781" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="932.5" y="1195.248">36</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="75" x="953.5" y="1195.248">Query order</text><polygon fill="#616161" points="1040,1224.0469,1050,1228.0469,1040,1232.0469,1044,1228.0469" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="748" x2="1046" y1="1228.0469" y2="1228.0469" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="872" y="1223.2168">37</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="35" x="893" y="1223.2168">Verify</text><polygon fill="#616161" points="414.5,1252.0156,404.5,1256.0156,414.5,1260.0156,410.5,1256.0156" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="408.5" x2="737" y1="1256.0156" y2="1256.0156" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="543.25" y="1251.1855">38</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="564.25" y="1251.1855">Notify</text><polygon fill="#616161" points="251.5,1279.9844,241.5,1283.9844,251.5,1287.9844,247.5,1283.9844" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;" x1="245.5" x2="392.5" y1="1283.9844" y2="1283.9844" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="289.5" y="1279.1543">39</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="34" x="310.5" y="1279.1543">Notify</text><polygon fill="#616161" points="726,1307.9531,736,1311.9531,726,1315.9531,730,1311.9531" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="398.5" x2="732" y1="1311.9531" y2="1311.9531" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="18" x="549.75" y="1307.123">40</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="15" x="571.75" y="1307.123">ok</text><polygon fill="#616161" points="124.5,1335.9219,114.5,1339.9219,124.5,1343.9219,120.5,1339.9219" style="stroke:#616161;stroke-width:1.0;" /><line style="stroke:#616161;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="118.5" x2="742" y1="1339.9219" y2="1339.9219" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="410.25" y="1335.0918">41</text><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="15" x="431.25" y="1335.0918">ok</text></g></svg></p>
<h3 id="_14">数据库<span class="purple">高可用</span></h3>
<ul>
<li>跨DC同步：基于otter进行同步，双向同步（多机房使用星型结构）</li>
<li>同DC高可用：基于mycat和mgr，实现大容量、高可用db集群</li>
<li><span class="green">mgr</span>的心跳检测：二次开发mycat，对mgr节点状态实时检测并增删故障db</li>
<li>应用层：去除自增主键，按机房、机器生成无冲突、有序的流水号，防止多机房数据冲突</li>
</ul>
<p><svg alt="uml diagram" class="uml" contentStyleType="text/css" height="958px" preserveAspectRatio="none" style="background:#FFFFFF;" title="" version="1.1" viewBox="0 0 1421 958" width="1421px" zoomAndPan="magnify"><defs /><g><g id="cluster_a"><rect fill="#FFFFFF" height="945" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="692" x="7" y="7" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="311.5" y="21.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="128" x="289" y="40.1484">idc A (Master)</text></g><g id="cluster_ka"><rect fill="#FFFFFF" height="510" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="644" x="31" y="68" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="311.5" y="82.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="101" x="302.5" y="101.1484">k8s cluster</text></g><g id="cluster_pa"><rect fill="#1976D2" height="331" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:1.0;" width="596" x="55" y="129" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="68" x="319" y="143.9951">&#171;system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="119" x="293.5" y="162.1484">Pay Gateway</text></g><g id="cluster_chs"><rect fill="#FFFFFF" height="138" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="548" x="79" y="190" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="311.5" y="204.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154" x="276" y="223.1484">Channel Services</text></g><g id="cluster_dba"><path d="M34,635 C34,625 353,625 353,625 C353,625 672,625 672,635 L672,777 C672,787 353,787 353,787 C353,787 34,787 34,777 L34,635 " fill="#1976D2" style="stroke:#1565C0;stroke-width:1.0;" /><path d="M34,635 C34,645 353,645 353,645 C353,645 672,645 672,635 " fill="none" style="stroke:#1565C0;stroke-width:1.0;" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="68" x="319" y="659.9951">&#171;system&#187;</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="25" x="340.5" y="678.1484">DB</text></g><g id="cluster_b"><rect fill="#FFFFFF" height="945" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="692" x="723" y="7" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="1027.5" y="21.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1047" y="40.1484">idc B</text></g><g id="cluster_kb"><rect fill="#FFFFFF" height="510" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="644" x="747" y="68" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="1027.5" y="82.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="101" x="1018.5" y="101.1484">k8s cluster</text></g><g id="cluster_pb"><rect fill="#1976D2" height="331" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:1.0;" width="596" x="771" y="129" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="68" x="1035" y="143.9951">&#171;system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="119" x="1009.5" y="162.1484">Pay Gateway</text></g><g id="cluster_chbs"><rect fill="#FFFFFF" height="138" rx="2.5" ry="2.5" style="stroke:#424242;stroke-width:1.0;" width="548" x="795" y="190" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="83" x="1027.5" y="204.9951">&#171;boundary&#187;</text><text fill="#424242" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154" x="992" y="223.1484">Channel Services</text></g><g id="cluster_dbb"><path d="M747,635 C747,625 1066,625 1066,625 C1066,625 1385,625 1385,635 L1385,777 C1385,787 1066,787 1066,787 C1066,787 747,787 747,777 L747,635 " fill="#1976D2" style="stroke:#1565C0;stroke-width:1.0;" /><path d="M747,635 C747,645 1066,645 1066,645 C1066,645 1385,645 1385,635 " fill="none" style="stroke:#1565C0;stroke-width:1.0;" /><text fill="#222222" font-family="'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace" font-size="14" lengthAdjust="spacing" textLength="68" x="1032" y="659.9951">&#171;system&#187;</text><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="25" x="1053.5" y="678.1484">DB</text></g><g id="elem_ota"><rect fill="#1976D2" height="87.5156" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.5;" width="94" x="423" y="848" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68" x="436" y="870.9951">&#171;system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="51" x="444.5" y="889.1484">Otter</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="468" y="905.917">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="70" x="437" y="922.2139">Sync data</text></g><g id="elem_ma"><rect fill="#757575" height="54.9219" rx="2.5" ry="2.5" style="stroke:#616161;stroke-width:0.5;" width="154" x="271" y="507" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="281" y="529.9951">&#171;external_system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="55" x="320.5" y="548.1484">Mycat</text></g><g id="elem_paa"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="106" x="292" y="375" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="302" y="397.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="44" x="323" y="416.1484">Apps</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="311" y="431.0605">[Gateways]</text></g><g id="elem_ch1"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="168" x="443" y="243" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="484" y="265.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="148" x="453" y="284.1484">Channel Wechat</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="474.5" y="299.0605">[Channel service]</text></g><g id="elem_ch2"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="152" x="256" y="243" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="289" y="265.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="132" x="266" y="284.1484">Channel Alipay</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="279.5" y="299.0605">[Channel service]</text></g><g id="elem_chx"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="125" x="95.5" y="243" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="115" y="265.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="99" x="108.5" y="284.1484">Channel &hellip;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="105.5" y="299.0605">[Channel service]</text></g><g id="elem_dba1"><path d="M50,703 C50,693 117,693 117,693 C117,693 184,693 184,703 L184,760.8906 C184,770.8906 117,770.8906 117,770.8906 C117,770.8906 50,770.8906 50,760.8906 L50,703 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M50,703 C50,713 117,713 117,713 C117,713 184,713 184,703 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="74" y="729.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="22" x="106" y="748.1484">db</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="114" x="60" y="763.0605">[Group replication]</text></g><g id="elem_dba2"><path d="M286,703 C286,693 353,693 353,693 C353,693 420,693 420,703 L420,760.8906 C420,770.8906 353,770.8906 353,770.8906 C353,770.8906 286,770.8906 286,760.8906 L286,703 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M286,703 C286,713 353,713 353,713 C353,713 420,713 420,703 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="310" y="729.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="22" x="342" y="748.1484">db</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="114" x="296" y="763.0605">[Group replication]</text></g><g id="elem_dba3"><path d="M522,703 C522,693 589,693 589,693 C589,693 656,693 656,703 L656,760.8906 C656,770.8906 589,770.8906 589,770.8906 C589,770.8906 522,770.8906 522,760.8906 L522,703 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M522,703 C522,713 589,713 589,713 C589,713 656,713 656,703 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="546" y="729.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="22" x="578" y="748.1484">db</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="114" x="532" y="763.0605">[Group replication]</text></g><g id="elem_otb"><rect fill="#1976D2" height="87.5156" rx="2.5" ry="2.5" style="stroke:#1565C0;stroke-width:0.5;" width="94" x="861" y="848" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68" x="874" y="870.9951">&#171;system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="51" x="882.5" y="889.1484">Otter</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="4" x="906" y="905.917">&#160;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="70" x="875" y="922.2139">Sync data</text></g><g id="elem_mb"><rect fill="#757575" height="54.9219" rx="2.5" ry="2.5" style="stroke:#616161;stroke-width:0.5;" width="154" x="987" y="507" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="997" y="529.9951">&#171;external_system&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1036.5" y="548.1484">Mycat</text></g><g id="elem_pab"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="106" x="1008" y="375" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1018" y="397.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1039" y="416.1484">Apps</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="1027" y="431.0605">[Gateways]</text></g><g id="elem_chb1"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="168" x="1159" y="243" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1200" y="265.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="148" x="1169" y="284.1484">Channel Wechat</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="1190.5" y="299.0605">[Channel service]</text></g><g id="elem_chb2"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="152" x="972" y="243" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1005" y="265.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="132" x="982" y="284.1484">Channel Alipay</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="995.5" y="299.0605">[Channel service]</text></g><g id="elem_chbx"><rect fill="#1E88E5" height="68.8906" rx="2.5" ry="2.5" style="stroke:#1E88E5;stroke-width:0.5;" width="125" x="811.5" y="243" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="831" y="265.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="99" x="824.5" y="284.1484">Channel &hellip;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="821.5" y="299.0605">[Channel service]</text></g><g id="elem_dbb1"><path d="M763,703 C763,693 830,693 830,693 C830,693 897,693 897,703 L897,760.8906 C897,770.8906 830,770.8906 830,770.8906 C830,770.8906 763,770.8906 763,760.8906 L763,703 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M763,703 C763,713 830,713 830,713 C830,713 897,713 897,703 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="787" y="729.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="22" x="819" y="748.1484">db</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="114" x="773" y="763.0605">[Group replication]</text></g><g id="elem_dbb2"><path d="M999,703 C999,693 1066,693 1066,693 C1066,693 1133,693 1133,703 L1133,760.8906 C1133,770.8906 1066,770.8906 1066,770.8906 C1066,770.8906 999,770.8906 999,760.8906 L999,703 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M999,703 C999,713 1066,713 1066,713 C1066,713 1133,713 1133,703 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1023" y="729.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1055" y="748.1484">db</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="114" x="1009" y="763.0605">[Group replication]</text></g><g id="elem_dbb3"><path d="M1235,703 C1235,693 1302,693 1302,693 C1302,693 1369,693 1369,703 L1369,760.8906 C1369,770.8906 1302,770.8906 1302,770.8906 C1302,770.8906 1235,770.8906 1235,760.8906 L1235,703 " fill="#1E88E5" style="stroke:#1E88E5;stroke-width:0.5;" /><path d="M1235,703 C1235,713 1302,713 1302,713 C1302,713 1369,713 1369,703 " fill="none" style="stroke:#1E88E5;stroke-width:0.5;" /><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1259" y="729.9951">&#171;container&#187;</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1291" y="748.1484">db</text><text fill="#FFFFFF" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="114" x="1245" y="763.0605">[Group replication]</text></g><g id="link_paa_ma"><path d="M345.82,444.11 C346.257,462.03 346.792,483.959 347.222,501.611 " fill="none" id="paa-to-ma" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="347.352,506.943,351.1297,497.8474,347.2291,501.9445,343.1321,498.044,347.352,506.943" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_ch1_paa"><path d="M475.499,315.286 C449.292,334.006 417.662,356.598 392.106,374.853 " fill="none" id="ch1-backto-paa" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="479.657,312.317,470.0083,314.2926,475.5881,315.2229,474.6578,320.8027,479.657,312.317" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_ch2_paa"><path d="M335.888,317.382 C337.717,335.673 339.877,357.274 341.635,374.853 " fill="none" id="ch2-backto-paa" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="335.382,312.317,332.2966,321.6701,335.8791,317.2922,340.257,320.8747,335.382,312.317" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_chx_paa"><path d="M208.527,315.137 C218.273,322.113 228.427,329.319 238,336 C256.4,348.843 276.752,362.715 294.724,374.852 " fill="none" id="chx-backto-paa" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="204.378,312.164,209.3631,320.658,208.442,315.0767,214.0234,314.1556,204.378,312.164" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_ma_dba1"><path d="M316.365,562.274 C277.623,595.062 211.567,650.966 166.179,689.379 " fill="none" id="ma-to-dba1" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="162.127,692.808,171.5812,690.0479,165.9439,689.5782,166.4136,683.9409,162.127,692.808" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="23" x="275" y="606.1387">W/R</text></g><g id="link_ma_dba2"><path d="M348.685,562.274 C349.512,594.6 350.913,649.396 351.894,687.745 " fill="none" id="ma-to-dba2" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="352.023,692.808,355.7929,683.7092,351.8959,687.8096,347.7954,683.9126,352.023,692.808" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="23" x="351" y="606.1387">W/R</text></g><g id="link_ma_dba3"><path d="M380.753,562.069 C421.186,594.869 490.407,651.021 537.864,689.518 " fill="none" id="ma-to-dba3" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="541.813,692.722,537.3438,683.9456,537.9301,689.5719,532.3037,690.1582,541.813,692.722" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="23" x="434" y="606.1387">W/R</text></g><g id="link_dba1_dba2"><path d="M189.573,732 C218.378,732 251.447,732 280.268,732 " fill="none" id="dba1-dba2" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="285.598,732,276.598,728,280.598,732,276.598,736,285.598,732" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="184.312,732,193.312,736,189.312,732,193.312,728,184.312,732" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="65" x="202.5" y="726.1387">Replication</text></g><g id="link_dba2_dba3"><path d="M425.573,732 C454.378,732 487.447,732 516.268,732 " fill="none" id="dba2-dba3" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="521.598,732,512.598,728,516.598,732,512.598,736,521.598,732" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="420.312,732,429.312,736,425.312,732,429.312,728,420.312,732" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="65" x="438.5" y="726.1387">Replication</text></g><g id="link_dba1_ota"><path d="M184.227,763.09 C252.268,793.545 356.028,839.987 418.019,867.734 " fill="none" id="dba1-to-ota" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="422.778,869.8637,416.198,862.5354,418.2144,867.8207,412.9292,869.8371,422.778,869.8637" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="37" x="306" y="815.1387">binlog</text></g><g id="link_dba2_ota"><path d="M381.322,771.247 C397.43,793 417.741,820.429 434.86,843.546 " fill="none" id="dba2-to-ota" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="438.017,847.809,435.8757,838.1957,435.0415,843.7907,429.4465,842.9565,438.017,847.809" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="37" x="417" y="815.1387">binlog</text></g><g id="link_dba3_ota"><path d="M560.193,771.247 C543.81,793 523.152,820.429 505.741,843.546 " fill="none" id="dba3-to-ota" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="502.53,847.809,511.1388,843.0247,505.5373,843.8145,504.7476,838.213,502.53,847.809" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="37" x="535" y="815.1387">binlog</text></g><g id="link_pab_mb"><path d="M1061.82,444.11 C1062.26,462.03 1062.79,483.959 1063.22,501.611 " fill="none" id="pab-to-mb" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1063.35,506.943,1067.1277,497.8475,1063.2272,501.9445,1059.1301,498.044,1063.35,506.943" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_chb1_pab"><path d="M1191.5,315.286 C1165.29,334.006 1133.66,356.598 1108.11,374.853 " fill="none" id="chb1-backto-pab" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1195.66,312.317,1186.0141,314.306,1191.5952,315.2286,1190.6726,320.8097,1195.66,312.317" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_chb2_pab"><path d="M1051.89,317.382 C1053.72,335.673 1055.88,357.274 1057.64,374.853 " fill="none" id="chb2-backto-pab" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1051.38,312.317,1048.2954,321.6703,1051.8775,317.2922,1056.2557,320.8743,1051.38,312.317" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_chbx_pab"><path d="M925.216,315.06 C935.078,322.043 945.343,329.271 955,336 C973.384,348.811 993.67,362.736 1011.53,374.927 " fill="none" id="chbx-backto-pab" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="921.017,312.085,926.0478,320.5521,925.0966,314.9758,930.673,314.0247,921.017,312.085" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_mb_dbb1"><path d="M1031.95,562.274 C992.71,595.062 925.795,650.966 879.818,689.379 " fill="none" id="mb-to-dbb1" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="875.713,692.808,885.1844,690.1074,879.5501,689.6023,880.0553,683.968,875.713,692.808" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="23" x="989" y="606.1387">W/R</text></g><g id="link_mb_dbb2"><path d="M1064.27,562.274 C1064.6,594.6 1065.17,649.396 1065.56,687.745 " fill="none" id="mb-to-dbb2" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1065.61,692.808,1069.5172,683.7673,1065.5586,687.8083,1061.5176,683.8496,1065.61,692.808" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="23" x="1065" y="606.1387">W/R</text></g><g id="link_mb_dbb3"><path d="M1096.59,562.274 C1136.59,595.128 1204.84,651.191 1251.61,689.61 " fill="none" id="mb-to-dbb3" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1255.51,692.808,1251.0922,684.0056,1251.6456,689.6353,1246.0158,690.1886,1255.51,692.808" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="23" x="1148" y="606.1387">W/R</text></g><g id="link_dbb1_dbb2"><path d="M902.573,732 C931.378,732 964.447,732 993.27,732 " fill="none" id="dbb1-dbb2" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="998.6,732,989.6,728,993.6,732,989.6,736,998.6,732" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="897.312,732,906.312,736,902.312,732,906.312,728,897.312,732" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="65" x="915.5" y="726.1387">Replication</text></g><g id="link_dbb2_dbb3"><path d="M1138.57,732 C1167.38,732 1200.45,732 1229.27,732 " fill="none" id="dbb2-dbb3" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1234.6,732,1225.6,728,1229.6,732,1225.6,736,1234.6,732" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1133.31,732,1142.31,736,1138.31,732,1142.31,728,1133.31,732" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="65" x="1151.5" y="726.1387">Replication</text></g><g id="link_dbb1_otb"><path d="M848.882,771.247 C859.576,792.91 873.049,820.201 884.431,843.258 " fill="none" id="dbb1-to-otb" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="886.678,847.809,886.2786,837.9682,884.4637,843.3261,879.1059,841.5112,886.678,847.809" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="37" x="873" y="815.1387">binlog</text></g><g id="link_dbb2_otb"><path d="M1027.75,771.247 C1005.82,793.18 978.116,820.884 954.88,844.12 " fill="none" id="dbb2-to-otb" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="951.191,847.809,960.3834,844.2735,954.7265,844.2735,954.7265,838.6166,951.191,847.809" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="37" x="992" y="815.1387">binlog</text></g><g id="link_dbb3_otb"><path d="M1234.8,760.816 C1208.67,771.573 1178.47,783.935 1151,795 C1085.17,821.516 1009.04,851.478 959.794,870.7696 " fill="none" id="dbb3-to-otb" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="955.113,872.6028,964.952,873.0436,959.7684,870.7786,962.0333,865.595,955.113,872.6028" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="37" x="1125" y="815.1387">binlog</text></g><g id="link_ota_otb"><path d="M522.331,892 C606.614,892 771.476,892 855.724,892 " fill="none" id="ota-otb" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="860.908,892,851.908,888,855.908,892,851.908,896,860.908,892" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="517.29,892,526.29,896,522.29,892,526.29,888,517.29,892" style="stroke:#616161;stroke-width:1.0;" /><text fill="#616161" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="12" lengthAdjust="spacing" textLength="28" x="675" y="886.1387">sync</text></g></g></svg></p>
<h3 id="_15">部署架构</h3>
<p><svg alt="uml diagram" class="uml" contentStyleType="text/css" height="539px" preserveAspectRatio="none" style="background:#FFFFFF;" title="" version="1.1" viewBox="0 0 2048 539" width="2048px" zoomAndPan="magnify"><defs /><g><g id="cluster_Kubernetes"><path d="M101.5311,93.5208 C145.7321,37.7194 193.0937,30.9989 228.8858,101.9684 C258.5562,30.2572 322.0319,26.853 364.8216,88.6061 C416.5397,20.6292 464.411,41.5353 502.1384,103.402 C530.8156,37.6151 590.831,32.1775 626.9868,96.2097 C670.2504,32.424 719.078,40.1165 755.2574,103.363 C794.884,35.9566 851.8937,46.6255 891.9767,102.8583 C924.5385,33.2659 967.54,23.1276 1018.4023,85.2994 C1062.4396,30.5408 1112.6817,38.3448 1149.6595,93.7133 C1182.4731,22.8886 1237.4918,22.0754 1281.937,81.9405 C1333.8588,26.3684 1378.1797,19.944 1418.2444,94.3728 C1464.8547,35.1573 1506.9923,37.875 1541.5052,106.0757 C1579.6456,48.0918 1634.0523,42.1247 1675.1945,102.6905 C1727.6666,45.9508 1774.8929,32.6285 1821.5843,109.0456 C1852.7845,41.5163 1897.5932,46.0877 1941.6417,95.9 C1948.1186,92.6648 1951.8148,95.4287 1951.6652,102.4047 C2028.1165,158.2778 2041.2547,216.302 1954.8264,275.1557 C2014.6733,328.923 2020.8585,390.8212 1934.6417,424.9 C1943.3982,427.0191 1946.0055,434.7689 1940.0649,441.6473 C1894.7984,506.0435 1853.8772,505.8912 1814.8545,435.8327 C1769.0462,498.887 1731.876,487.1913 1692.375,429.4382 C1661.2778,507.3078 1595.2513,502.726 1552.8316,440.735 C1522.288,491.5376 1465.8743,503.4109 1431.3932,445.1182 C1393.0148,511.7546 1340.774,506.7327 1294.5894,454.0698 C1248.295,512.2747 1194.6557,520.1795 1149.6298,452.6078 C1116.2139,510.2998 1067.8416,500.0565 1037.9666,448.973 C993.3776,525.4949 940.2794,523.6968 894.087,450.514 C852.2989,517.4651 784.0053,515.6277 754.0638,438.9637 C720.1466,502.3313 679.7763,499.3694 637.2197,447.7419 C596.7605,504.3505 530.7693,501.3205 501.2958,435.5412 C456.8132,489.754 417.9554,502.2472 374.2924,434.6863 C339.4132,511.418 269.1677,494.291 231.3568,437.8324 C182.0428,495.1107 119.3265,500.181 89.6417,417.9 C91.8601,418.0095 92.472,418.956 91.5161,420.9907 C34.7712,376.3965 27.5238,318.9192 97.0633,279.268 C19.5655,220.5502 6,147.9902 96.6417,88.9 C100.3533,88.2143 101.8631,89.9277 101.5311,93.5208 " fill="#E3F2FD" style="stroke:#424242;stroke-width:1.0;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="970.1417" y="106.8951">Kubernetes</text></g><g id="cluster_c"><path d="M1417.1417,123.9 L1491.1417,123.9 A3.75,3.75 0 0 1 1493.6417,126.4 L1500.6417,146.1969 L1923.1417,146.1969 A2.5,2.5 0 0 1 1925.6417,148.6969 L1925.6417,218.4 A2.5,2.5 0 0 1 1923.1417,220.9 L1417.1417,220.9 A2.5,2.5 0 0 1 1414.6417,218.4 L1414.6417,126.4 A2.5,2.5 0 0 1 1417.1417,123.9 " fill="#E3F2FD" style="stroke:#424242;stroke-width:1.0;" /><line style="stroke:#424242;stroke-width:1.0;" x1="1414.6417" x2="1500.6417" y1="146.1969" y2="146.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="1418.6417" y="138.8951">Channels</text></g><g id="elem_PayGateway"><polygon fill="#90CAF9" points="1400.1417,274.9,1410.1417,264.9,1527.1417,264.9,1527.1417,301.1969,1517.1417,311.1969,1400.1417,311.1969,1400.1417,274.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1517.1417" x2="1527.1417" y1="274.9" y2="264.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1400.1417" x2="1517.1417" y1="274.9" y2="274.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1517.1417" x2="1517.1417" y1="274.9" y2="311.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="87" x="1415.1417" y="297.8951">PayGateway</text></g><g id="elem_QueryGateway"><polygon fill="#90CAF9" points="485.6417,168.9,495.6417,158.9,629.6417,158.9,629.6417,195.1969,619.6417,205.1969,485.6417,205.1969,485.6417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="619.6417" x2="629.6417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="485.6417" x2="619.6417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="619.6417" x2="619.6417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="104" x="500.6417" y="191.8951">QueryGateway</text></g><g id="elem_RefundGateway"><polygon fill="#90CAF9" points="1242.1417,168.9,1252.1417,158.9,1395.1417,158.9,1395.1417,195.1969,1385.1417,205.1969,1242.1417,205.1969,1242.1417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1385.1417" x2="1395.1417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1242.1417" x2="1385.1417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1385.1417" x2="1385.1417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="113" x="1257.1417" y="191.8951">RefundGateway</text></g><g id="elem_TransferGateway"><polygon fill="#90CAF9" points="664.6417,168.9,674.6417,158.9,826.6417,158.9,826.6417,195.1969,816.6417,205.1969,664.6417,205.1969,664.6417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="816.6417" x2="826.6417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="664.6417" x2="816.6417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="816.6417" x2="816.6417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="122" x="679.6417" y="191.8951">TransferGateway</text></g><g id="elem_CallbackGateway"><polygon fill="#90CAF9" points="862.1417,168.9,872.1417,158.9,1025.1417,158.9,1025.1417,195.1969,1015.1417,205.1969,862.1417,205.1969,862.1417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1015.1417" x2="1025.1417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="862.1417" x2="1015.1417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1015.1417" x2="1015.1417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="123" x="877.1417" y="191.8951">CallbackGateway</text></g><g id="elem_NotifyGateway"><polygon fill="#90CAF9" points="1060.6417,168.9,1070.6417,158.9,1206.6417,158.9,1206.6417,195.1969,1196.6417,205.1969,1060.6417,205.1969,1060.6417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1196.6417" x2="1206.6417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1060.6417" x2="1196.6417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1196.6417" x2="1196.6417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="106" x="1075.6417" y="191.8951">NotifyGateway</text></g><g id="elem_PayDatabase"><polygon fill="#90CAF9" points="679.1417,380.9,689.1417,370.9,812.1417,370.9,812.1417,407.1969,802.1417,417.1969,679.1417,417.1969,679.1417,380.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="802.1417" x2="812.1417" y1="380.9" y2="370.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="679.1417" x2="802.1417" y1="380.9" y2="380.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="802.1417" x2="802.1417" y1="380.9" y2="417.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="93" x="694.1417" y="403.8951">PayDatabase</text></g><g id="elem_PayManagerSystem"><polygon fill="#90CAF9" points="270.6417,168.9,280.6417,158.9,450.6417,158.9,450.6417,195.1969,440.6417,205.1969,270.6417,205.1969,270.6417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="440.6417" x2="450.6417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="270.6417" x2="440.6417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="440.6417" x2="440.6417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="140" x="285.6417" y="191.8951">PayManagerSystem</text></g><g id="elem_OrderMonitor"><polygon fill="#90CAF9" points="98.1417,168.9,108.1417,158.9,235.1417,158.9,235.1417,195.1969,225.1417,205.1969,98.1417,205.1969,98.1417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="225.1417" x2="235.1417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="98.1417" x2="225.1417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="225.1417" x2="225.1417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="97" x="113.1417" y="191.8951">OrderMonitor</text></g><g id="elem_PayCenter"><polygon fill="#90CAF9" points="1562.1417,274.9,1572.1417,264.9,1677.1417,264.9,1677.1417,301.1969,1667.1417,311.1969,1562.1417,311.1969,1562.1417,274.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1667.1417" x2="1677.1417" y1="274.9" y2="264.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1562.1417" x2="1667.1417" y1="274.9" y2="274.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1667.1417" x2="1667.1417" y1="274.9" y2="311.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="75" x="1577.1417" y="297.8951">PayCenter</text></g><g id="elem_channels"><polygon fill="#90CAF9" points="1796.1417,168.9,1806.1417,158.9,1909.1417,158.9,1909.1417,195.1969,1899.1417,205.1969,1796.1417,205.1969,1796.1417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1899.1417" x2="1909.1417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1796.1417" x2="1899.1417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1899.1417" x2="1899.1417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="73" x="1811.1417" y="191.8951">Channel&hellip;</text></g><g id="elem_ChannelWechat"><polygon fill="#90CAF9" points="1608.1417,168.9,1618.1417,158.9,1761.1417,158.9,1761.1417,195.1969,1751.1417,205.1969,1608.1417,205.1969,1608.1417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1751.1417" x2="1761.1417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1608.1417" x2="1751.1417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1751.1417" x2="1751.1417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="113" x="1623.1417" y="191.8951">ChannelWechat</text></g><g id="elem_ChannelAlipay"><polygon fill="#90CAF9" points="1430.6417,168.9,1440.6417,158.9,1572.6417,158.9,1572.6417,195.1969,1562.6417,205.1969,1430.6417,205.1969,1430.6417,168.9" style="stroke:#424242;stroke-width:0.5;" /><line style="stroke:#424242;stroke-width:0.5;" x1="1562.6417" x2="1572.6417" y1="168.9" y2="158.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1430.6417" x2="1562.6417" y1="168.9" y2="168.9" /><line style="stroke:#424242;stroke-width:0.5;" x1="1562.6417" x2="1562.6417" y1="168.9" y2="205.1969" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="102" x="1445.6417" y="191.8951">ChannelAlipay</text></g><g id="elem_mysql"><path d="M714.6417,486.9 C714.6417,476.9 745.6417,476.9 745.6417,476.9 C745.6417,476.9 776.6417,476.9 776.6417,486.9 L776.6417,512.1969 C776.6417,522.1969 745.6417,522.1969 745.6417,522.1969 C745.6417,522.1969 714.6417,522.1969 714.6417,512.1969 L714.6417,486.9 " fill="#E3F2FD" style="stroke:#424242;stroke-width:0.5;" /><path d="M714.6417,486.9 C714.6417,496.9 745.6417,496.9 745.6417,496.9 C745.6417,496.9 776.6417,496.9 776.6417,486.9 " fill="none" style="stroke:#424242;stroke-width:0.5;" /><text fill="#222222" font-family="&quot;'Input Mono','Microsoft YaHei Mono',Menlo, Monaco, 'Courier New', monospace&quot;" font-size="14" lengthAdjust="spacing" textLength="42" x="724.6417" y="513.8951">mysql</text></g><g id="link_PayGateway_PayCenter"><path d="M1532.4617,287.9 C1542.2917,287.9 1552.1117,287.9 1561.9417,287.9 " fill="none" id="PayGateway-backto-PayCenter" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1527.3217,287.9,1536.3217,291.9,1532.3217,287.9,1536.3217,283.9,1527.3217,287.9" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_PayGateway_PayDatabase"><path d="M1399.9217,298.129 C1266.4217,317.467 958.1007,362.126 817.6667,382.467 " fill="none" id="PayGateway-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="812.3337,383.24,821.8143,385.9079,817.282,382.5229,820.667,377.9906,812.3337,383.24" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_channels_PayGateway"><path d="M1818.7517,207.966 C1806.6417,215.814 1792.5417,223.757 1778.6417,228.9 C1679.9617,265.416 1647.5817,243.075 1544.6417,264.9 C1538.9417,266.109 1533.0417,267.477 1527.1517,268.926 " fill="none" id="channels-backto-PayGateway" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="1823.1117,205.085,1813.3938,206.6859,1818.9335,207.8314,1817.788,213.371,1823.1117,205.085" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_QueryGateway_PayDatabase"><path d="M577.4057,204.977 C612.3847,244.049 685.0157,325.179 722.3587,366.893 " fill="none" id="QueryGateway-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="725.8607,370.804,722.8375,361.4306,722.5255,367.0789,716.8773,366.7669,725.8607,370.804" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_QueryGateway_channels"><path d="M567.4057,158.819 C582.7267,125.984 615.8467,67.093 665.1417,42.9 C719.8027,16.073 1707.5417,14.013 1761.1417,42.9 C1804.6517,66.35 1830.8717,120.538 1843.4817,153.906 " fill="none" id="QueryGateway-to-channels" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="1845.2417,158.672,1845.8716,148.8433,1843.5074,153.9824,1838.3683,151.6182,1845.2417,158.672" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_RefundGateway_PayDatabase"><path d="M1276.1117,205.116 C1260.1617,213.069 1241.7617,221.812 1224.6417,228.9 C1083.0217,287.527 912.0817,342.379 817.4787,371.396 " fill="none" id="RefundGateway-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="812.4737,372.929,822.2505,374.1183,817.2545,371.4649,819.9079,366.4689,812.4737,372.929" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_RefundGateway_channels"><path d="M1329.3117,158.778 C1345.9417,125.893 1381.4717,66.94 1432.1417,42.9 C1498.1917,11.559 1696.7817,8.214 1761.1417,42.9 C1804.6517,66.35 1830.8717,120.538 1843.4817,153.906 " fill="none" id="RefundGateway-to-channels" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="1845.2417,158.672,1845.8716,148.8433,1843.5074,153.9824,1838.3683,151.6182,1845.2417,158.672" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_CallbackGateway_PayDatabase"><path d="M922.8267,204.977 C885.9877,244.049 809.4927,325.179 770.1627,366.893 " fill="none" id="CallbackGateway-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="766.4747,370.804,775.5588,366.9989,769.9044,367.1657,769.7376,361.5113,766.4747,370.804" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_CallbackGateway_channels"><path d="M954.9187,158.752 C972.4187,125.836 1009.5497,66.844 1061.1417,42.9 C1131.6917,10.158 1692.6717,6 1761.1417,42.9 C1804.6517,66.35 1830.8717,120.538 1843.4817,153.906 " fill="none" id="CallbackGateway-to-channels" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="1845.2417,158.672,1845.8716,148.8433,1843.5074,153.9824,1838.3683,151.6182,1845.2417,158.672" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_CallbackGateway_NotifyGateway"><path d="M1025.2827,181.9 C1035.2547,181.9 1045.2267,181.9 1055.1997,181.9 " fill="none" id="CallbackGateway-to-NotifyGateway" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="1060.4147,181.9,1051.4147,177.9,1055.4147,181.9,1051.4147,185.9,1060.4147,181.9" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_TransferGateway_PayDatabase"><path d="M745.6417,204.977 C745.6417,243.655 745.6417,323.548 745.6417,365.619 " fill="none" id="TransferGateway-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="745.6417,370.804,749.6417,361.804,745.6417,365.804,741.6417,361.804,745.6417,370.804" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_TransferGateway_channels"><path d="M756.7687,158.759 C774.0507,125.85 810.7817,66.867 862.1417,42.9 C907.4007,21.78 1717.1717,19.205 1761.1417,42.9 C1804.6517,66.35 1830.8717,120.538 1843.4817,153.906 " fill="none" id="TransferGateway-to-channels" style="stroke:#616161;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /><polygon fill="#616161" points="1845.2417,158.672,1845.8716,148.8433,1843.5074,153.9824,1838.3683,151.6182,1845.2417,158.672" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_PayManagerSystem_PayDatabase"><path d="M401.1157,204.977 C473.6137,244.521 625.0967,327.148 700.7057,368.389 " fill="none" id="PayManagerSystem-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="705.1327,370.804,699.1467,362.983,700.7431,368.4099,695.3162,370.0064,705.1327,370.804" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_PayManagerSystem_QueryGateway"><path d="M450.6767,181.9 C460.5207,181.9 470.3647,181.9 480.2087,181.9 " fill="none" id="PayManagerSystem-to-QueryGateway" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="485.3567,181.9,476.3567,177.9,480.3567,181.9,476.3567,185.9,485.3567,181.9" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_OrderMonitor_PayDatabase"><path d="M204.4847,204.935 C219.2387,213.047 236.4647,221.943 252.6417,228.9 C398.5057,291.631 576.8687,345.633 674.0717,373.251 " fill="none" id="OrderMonitor-to-PayDatabase" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="678.9247,374.628,671.3577,368.324,674.1144,373.2636,669.1748,376.0204,678.9247,374.628" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_OrderMonitor_QueryGateway"><path d="M175.7947,158.848 C190.2367,126.05 221.7447,67.203 270.1417,42.9 C342.0307,6.8 379.0057,7.294 451.1417,42.9 C497.9117,65.985 529.8257,120.556 545.7907,154.044 " fill="none" id="OrderMonitor-to-QueryGateway" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="548.0297,158.826,547.8328,148.9791,545.9081,154.2984,540.5887,152.3737,548.0297,158.826" style="stroke:#616161;stroke-width:1.0;" /></g><g id="link_PayDatabase_mysql"><path d="M745.6417,417.103 C745.6417,433.0368 745.6417,454.5902 745.6417,471.5009 " fill="none" id="PayDatabase-to-mysql" style="stroke:#616161;stroke-width:1.0;" /><polygon fill="#616161" points="745.6417,476.5886,749.6417,467.5886,745.6417,471.5886,741.6417,467.5886,745.6417,476.5886" style="stroke:#616161;stroke-width:1.0;" /></g></g></svg></p>
<h2 id="_16">交互</h2>
<h3 id="_17">配置</h3>
<p>核心交易系统是将配置信息存储在<code>etcd</code>容器内</p>
<h4 id="_18">渠道</h4>
<ul>
<li>基础目录: <code>/foo/bar/pay/config</code></li>
<li>每个渠道占用一个文件夹，每个渠道账户占用一个<code>文件</code>，例如微信存放在<code>/foo/bar/pay/config/wechat</code>目录下，appId: 2088123456 所在的配置信息存储在<code>/foo/bar/pay/config/wechat/2088123456</code></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
    
    <div class="md-footer-nav">
        <nav class="md-footer-nav__inner md-grid">
            
            <a href="../biz/" title="1.2 需求设计" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
                </div>
                <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                1.2 需求设计
              </span>
                </div>
            </a>
            
            
            <a href="../pay-admin/" title="1.4 管理后台" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
                <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                1.4 管理后台
              </span>
                </div>
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
                </div>
            </a>
            
        </nav>
    </div>
    
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
            <div class="md-footer-copyright">
                
                <div class="md-footer-copyright__highlight">
                    Copyright &copy; 2022 <a href="https://pjoc.pub">pjoc.pub</a>.
                </div>
                
            </div>
            
        </div>
    </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.53c85856.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.716f8af4.min.js"></script>
      
        <script src="https://cdn.bootcss.com/raphael/2.2.7/raphael.min.js"></script>
      
        <script src="https://cdn.bootcss.com/underscore.js/1.8.3/underscore-min.js"></script>
      
        <script src="https://cdn.bootcss.com/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script>
      
        <script src="https://cdn.bootcss.com/flowchart/1.6.5/flowchart.min.js"></script>
      
        <script src="../../../js/umlconvert.js"></script>
      
        <script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>